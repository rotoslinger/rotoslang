#include "LHLocator.h"

// shapes
static float lincoln[][3] = {{-0.10214000159f, -0.393677242157f, 8.74139077026e-17f},
                            {-0.194965489673f, -0.358867684126f, 7.96846331421e-17f},
                            {-0.2251337733f, -0.314775577287f, 6.98942186986e-17f},
                            {-0.129987648015f, -0.354226409722f, 7.86540632006e-17f},
                            {-0.188003578067f, -0.291569205266f, 6.47413689916e-17f},
                            {-0.132308285217f, -0.337981949307f, 7.50470684057e-17f},
                            {-0.0534066203471f, -0.391356604955f, 8.68986227319e-17f},
                            {-0.0998193643883f, -0.337981949307f, 7.50470684057e-17f},
                            {-0.113743187601f, -0.291569205266f, 6.47413689916e-17f},
                            {-0.0766129923677f, -0.340302586509f, 7.55623533764e-17f},
                            {-0.0371621599327f, -0.372791507338f, 8.27763429663e-17f},
                            {-0.0696510807616f, -0.319416851691f, 7.09247886401e-17f},
                            {-0.0928574527822f, -0.263721558841f, 5.85579493431e-17f},
                            {-0.164797206046f, -0.214988177598f, 4.77369649583e-17f},
                            {-0.218171861693f, -0.214988177598f, 4.77369649583e-17f},
                            {-0.285470340553f, -0.261400921639f, 5.80426643724e-17f},
                            {-0.264584605735f, -0.219629452002f, 4.87675348997e-17f},
                            {-0.233881565687f, -0.179776655618f, -0.000245076338577f},
                            {-0.214251844247f, -0.156403043224f, -0.00018463754526f},
                            {-0.178584652527f, -0.100072748528f, 2.22206139107e-17f},
                            {-0.183362303663f, -0.0896737686867f, 1.99115765402e-17f},
                            {-0.143911471227f, -0.098956317495f, 2.1972716423e-17f},
                            {-0.0835749039739f, -0.13840714993f, 3.0732560925e-17f},
                            {-0.0371621599327f, -0.184819893971f, 4.10382603391e-17f},
                            {-0.00931451350799f, -0.226591363608f, 5.03133898118e-17f},
                            {-0.0441240715389f, -0.22891200081f, 5.08286747825e-17f},
                            {-3.19646997529e-05f, -0.310134302882f, 6.88636487572e-17f},
                            {0.0394188677353f, -0.393677242157f, 8.74139077026e-17f},
                            {0.102076072191f, -0.46561699542f, 1.03387741795e-16f},
                            {0.0394188677353f, -0.486502730239f, 1.08025306531e-16f},
                            {-0.0394827971348f, -0.488823367441f, 1.08540591502e-16f},
                            {-0.162476568844f, -0.456334446612f, 1.01326601912e-16f},
                            {-0.252981419724f, -0.409921702571f, 9.10209024976e-17f},
                            {-0.313317986978f, -0.358867684126f, 7.96846331421e-17f},
                            {-0.306628146945f, -0.301071257207f, 6.68512483609e-17f},
                            {-0.276850590103f, -0.228116242946f, 5.06519810419e-17f},
                            {-0.236650888367f, -0.177494396316f, 3.94116731063e-17f},
                            {-0.218171861693f, -0.154651610344f, 3.43395557199e-17f},
                            {-0.181562408211f, -0.0836950922653f, 1.85840436962e-17f},
                            {-0.139270196823f, -0.00845146661464f, 1.87660256549e-18f},
                            {-0.00931451350799f, -0.103597591899f, 2.30032863644e-17f},
                            {0.0254950445229f, -0.184819893971f, 4.10382603391e-17f},
                            {0.0695871513621f, -0.328699400499f, 7.29859285229e-17f},
                            {0.145846682578f, -0.453873660926f, 1.00780197726e-16f},
                            {0.102076072191f, -0.46561699542f, 1.03387741795e-16f},
                            {0.197222197475f, -0.440089986198f, 9.77196071168e-17f},
                            {0.243634941517f, -0.426166162985f, 9.46278972925e-17f},
                            {0.306292145972f, -0.379753418944f, 8.43221978784e-17f},
                            {0.278500844989f, -0.327871058365f, 7.28019996209e-17f},
                            {0.245955578719f, -0.279966019256f, 6.21649441381e-17f},
                            {0.223412364832f, -0.251938288419f, 5.59415377175e-17f},
                            {0.181723785254f, -0.208760830999f, 4.6354216243e-17f},
                            {0.123657549413f, -0.162605617895f, 3.61057001841e-17f},
                            {0.134079694308f, -0.153672350843f, 3.41221164307e-17f},
                            {0.0742284257662f, -0.163934159153f, 3.64006956028e-17f},
                            {0.0487014165435f, -0.13840714993f, 3.0732560925e-17f},
                            {0.125146427256f, -0.111983771265f, 2.48653922485e-17f},
                            {0.134079694308f, -0.153672350843f, 3.41221164307e-17f},
                            {0.125146427256f, -0.111983771265f, 2.48653922485e-17f},
                            {0.09239111473f, -0.114961526949f, 2.55265868329e-17f},
                            {0.0324569561291f, -0.0827118570806f, 1.83657216281e-17f},
                            {-0.00931451350799f, -0.0548642106558f, 1.21823019796e-17f},
                            {-0.116063824803f, 0.00779299379978f, -1.73039222945e-18f},
                            {-0.127962805896f, 0.00414870041678f, -9.21196544996e-19f},
                            {-0.127667010813f, -0.0130927410188f, 2.9071725069e-18f},
                            {-0.0557272575492f, -0.0479022990497f, 1.06364470675e-17f},
                            {0.0487014165435f, -0.13840714993f, 3.0732560925e-17f},
                            {0.0463807793414f, -0.131445238324f, 2.91867060129e-17f},
                            {0.09239111473f, -0.114961526949f, 2.55265868329e-17f},
                            {0.09239111473f, -0.0866728479494f, 1.92452382807e-17f},
                            {0.0835109745744f, -0.105918229101f, 2.35185713351e-17f},
                            {0.0508680411876f, -0.0856144227101f, 1.90102206665e-17f},
                            {0.0358137567314f, -0.0762507030549f, 1.69310572351e-17f},
                            {0.00156956636379f, -0.0211622228984f, 4.69895742281e-18f},
                            {-0.0296968683197f, 0.00712645610092f, -1.58239112944e-18f},
                            {0.00156956636379f, -0.0211622228984f, 4.69895742281e-18f},
                            {0.0358137567314f, -0.0762507030549f, 1.69310572351e-17f},
                            {0.0835109745744f, -0.105918229101f, 2.35185713351e-17f},
                            {0.09239111473f, -0.0866728479494f, 1.92452382807e-17f},
                            {0.108768770993f, -0.0613619246343f, 1.36250843129e-17f},
                            {0.0811903373724f, -0.0409403874435f, 9.09059215537e-18f},
                            {0.0533426909476f, -0.0200546526249f, 4.45302741901e-18f},
                            {0.0115712213105f, 0.00315171939566f, -6.99822288043e-19f},
                            {-0.00931451350799f, 0.0309993658204f, -6.88324193651e-18f},
                            {-0.0394827971348f, 0.0681295610533f, -1.51278014678e-17f},
                            {-0.0464992626909f, 0.0714495128931f, -1.58649788624e-17f},
                            {-0.0544392199021f, 0.0790208279772f, -1.7546148529e-17f},
                            {-0.078420041589f, 0.0998386086226f, -2.21686244079e-17f},
                            {-0.088216178378f, 0.0843740214678f, -1.87347962627e-17f},
                            {-0.085895541176f, 0.0588470122451f, -1.3066661585e-17f},
                            {-0.0719717179636f, 0.0472438262348f, -1.04902367315e-17f},
                            {-0.0951780899842f, 0.0193961798101f, -4.30681708298e-18f},
                            {-0.106781275995f, 0.00779299379978f, -1.73039222945e-18f},
                            {-0.116063824803f, 0.00779299379978f, -1.73039222945e-18f},
                            {-0.164797206046f, 0.0333200030224f, -7.39852690722e-18f},
                            {-0.167117843248f, 0.0472438262348f, -1.04902367315e-17f},
                            {-0.162476568844f, 0.0727708354575f, -1.61583714092e-17f},
                            {-0.194965489673f, 0.114542305095f, -2.54335008819e-17f},
                            {-0.211209950087f, 0.163275686338f, -3.62544852667e-17f},
                            {-0.215851224491f, 0.281628183643f, -6.25340187727e-17f},
                            {-0.162476568844f, 0.351247299705f, -7.79925678939e-17f},
                            {-0.0391860062806f, 0.417658778428f, -9.27388784496e-17f},
                            {0.0101081426631f, 0.415363960734f, -9.22293265612e-17f},
                            {0.0608370499093f, 0.415912869488f, -9.23512087888e-17f},
                            {0.087809369909f, 0.401116192728f, -8.90656865434e-17f},
                            {0.159373144487f, 0.374180770342f, -8.30848213212e-17f},
                            {0.189508799725f, 0.342434331693f, -7.60356958935e-17f},
                            {0.188543575621f, 0.318456306886f, -7.07115048484e-17f},
                            {0.159194749648f, 0.296487924244f, -6.58335440039e-17f},
                            {0.136885630222f, 0.32339965328f, -7.18091482454e-17f},
                            {0.0925084409024f, 0.331410254566f, -7.35878590432e-17f},
                            {0.050470011529f, 0.332161470019f, -7.37546623816e-17f},
                            {0.0309695433457f, 0.316984078649f, -7.03846045111e-17f},
                            {0.0411571190241f, 0.34360922963f, -7.62965756417e-17f},
                            {0.006923210809f, 0.334315611479f, -7.42329778711e-17f},
                            {0.0183597447645f, 0.300348344255f, -6.669072944e-17f},
                            {-0.00961017900903f, 0.258939986908f, -5.74962270922e-17f},
                            {0.0138660166787f, 0.223879169742f, -4.97111617963e-17f},
                            {0.0078918099131f, 0.197806812977f, -4.39219356389e-17f},
                            {-0.0247754463035f, 0.173703031546f, -3.8569821014e-17f},
                            {-0.0490655905979f, 0.161835319294f, -3.59346595356e-17f},
                            {-0.0526377161023f, 0.187882190571f, -4.17182267778e-17f},
                            {-0.0846935172254f, 0.19530214833f, -4.3365788367e-17f},
                            {-0.0930165700193f, 0.173526953136f, -3.85307237529e-17f},
                            {-0.0973669666855f, 0.146336217785f, -3.24931676643e-17f},
                            {-0.0766730448038f, 0.101307279211f, -2.24947347885e-17f},
                            {-0.0491585385942f, 0.0793130542682f, -1.76110358004e-17f},
                            {-0.0249093637971f, 0.0990563927504f, -2.19949375936e-17f},
                            {-0.0249370719174f, 0.10877392553f, -0.000697674640239f},
                            {-0.0418063250966f, 0.119599865954f, -2.65565049848e-17f},
                            {-0.0488866330569f, 0.127179367116f, -2.82394923259e-17f},
                            {-0.0576389152108f, 0.127998690369f, -2.84214186339e-17f},
                            {-0.0693756158676f, 0.144488179773f, -3.2082820794e-17f},
                            {-0.0688993867149f, 0.175840821804f, -3.90445058071e-17f},
                            {-0.0584181591422f, 0.161998568985f, -3.59709082488e-17f},
                            {-0.0535077045897f, 0.136062265738f, -3.0211892041e-17f},
                            {-0.0404268310405f, 0.122281808362f, -2.71520158272e-17f},
                            {-0.0207090311478f, 0.109772067693f, -2.43742954028e-17f},
                            {-0.0214602153408f, 0.0923505883495f, -2.05059499047e-17f},
                            {-0.0118298889865f, 0.0894068402974f, -1.98523065314e-17f},
                            {0.0119214591766f, 0.0836166789873f, -1.85666324509e-17f},
                            {0.0305507286708f, 0.085978568292f, -1.90910772284e-17f},
                            {0.0110430946491f, 0.0461648253517f, -1.02506504067e-17f},
                            {0.0310589636911f, 0.0538203655341f, -1.19505218019e-17f},
                            {0.0447791939876f, 0.072309375559f, -1.60559067284e-17f},
                            {0.043849473745f, 0.0376001724581f, -8.34891543858e-18f},
                            {0.0582915725227f, 0.0346869415033f, -7.70204822217e-18f},
                            {0.0849674955898f, 0.0435415723614f, -9.6681712328e-18f},
                            {0.103937484423f, 0.057892062346f, -1.28546201119e-17f},
                            {0.0801542997479f, 0.0157172731313f, -3.48993570294e-18f},
                            {0.0955324858382f, 0.00221431892837f, -4.91677571627e-19f},
                            {0.106710036266f, -0.0177662770792f, 3.94490597504e-18f},
                            {0.13066466898f, -0.00896105441786f, 1.98975378793e-18f},
                            {0.155474720874f, -0.013349094129f, 2.96409433198e-18f},
                            {0.179380595379f, -0.00717297839341f, 1.5927211535e-18f},
                            {0.173126720766f, 0.000859906519645f, -1.90937603427e-19f},
                            {0.155218700433f, 0.0144070191436f, -3.19900087388e-18f},
                            {0.164540603906f, 0.0168954686223f, -3.75154765526e-18f},
                            {0.187702973215f, 0.00324954727064f, -7.21544439895e-19f},
                            {0.192145930149f, -0.013717833688f, 3.04597096169e-18f},
                            {0.184701540938f, -0.0241399785825f, 5.36015200726e-18f},
                            {0.181723785254f, -0.0434953905294f, 9.65791680617e-18f},
                            {0.162368373307f, -0.0583841689501f, 1.29638897284e-17f},
                            {0.131101938624f, -0.0628508024763f, 1.39556816051e-17f},
                            {0.108768770993f, -0.0613619246343f, 1.36250843129e-17f},
                            {0.131101938624f, -0.0628508024763f, 1.39556816051e-17f},
                            {0.162368373307f, -0.0583841689501f, 1.29638897284e-17f},
                            {0.181723785254f, -0.0434953905294f, 9.65791680617e-18f},
                            {0.184701540938f, -0.0241399785825f, 5.36015200726e-18f},
                            {0.192145930149f, -0.013717833688f, 3.04597096169e-18f},
                            {0.187702973215f, 0.00324954727064f, -7.21544439895e-19f},
                            {0.164540603906f, 0.0168954686223f, -3.75154765526e-18f},
                            {0.160092002242f, 0.0240374542142f, -5.3373870244e-18f},
                            {0.176336462657f, 0.0333200030224f, -7.39852690722e-18f},
                            {0.174015825455f, 0.0449231890327f, -9.97495176075e-18f},
                            {0.160092002242f, 0.0495644634369f, -1.10055217022e-17f},
                            {0.140819565295f, 0.0504452523712f, -1.12010961331e-17f},
                            {0.136253610059f, 0.0461079964187f, -1.02380318487e-17f},
                            {0.118931995281f, 0.028853339786f, -6.40672843354e-18f},
                            {0.102076072191f, 0.0263580914163f, -5.8526719951e-18f},
                            {0.115999895403f, 0.0309993658204f, -6.88324193651e-18f},
                            {0.133552034166f, 0.0487172209317f, -1.08173960748e-17f},
                            {0.136083951198f, 0.0511651765051f, -1.1360951403e-17f},
                            {0.155450727838f, 0.0588470122451f, -1.3066661585e-17f},
                            {0.175791763629f, 0.0544780873551f, -1.20965653838e-17f},
                            {0.17640974132f, 0.0627364923193f, -1.39302996514e-17f},
                            {0.177464154152f, 0.0787086032197f, -1.74768207061e-17f},
                            {0.176629627993f, 0.084349335979f, -1.87293149831e-17f},
                            {0.154253381004f, 0.0895769410558f, -1.98900764871e-17f},
                            {0.159798836906f, 0.105259756286f, -2.33723609991e-17f},
                            {0.174015825455f, 0.116862942297f, -2.59487858526e-17f},
                            {0.162412639444f, 0.114542305095f, -2.54335008819e-17f},
                            {0.148488816232f, 0.093656570276f, -2.07959361456e-17f},
                            {0.139206267424f, 0.0727708354575f, -1.61583714092e-17f},
                            {0.118320532605f, 0.054205737841f, -1.20360916436e-17f},
                            {0.139206267424f, 0.0727708354575f, -1.61583714092e-17f},
                            {0.148488816232f, 0.093656570276f, -2.07959361456e-17f},
                            {0.162412639444f, 0.114542305095f, -2.54335008819e-17f},
                            {0.174015825455f, 0.116862942297f, -2.59487858526e-17f},
                            {0.160092002242f, 0.105259756286f, -2.33723609991e-17f},
                            {0.15777136504f, 0.0913359330739f, -2.02806511749e-17f},
                            {0.180829039558f, 0.0870686632708f, -1.93331269373e-17f},
                            {0.17961598949f, 0.0627364923193f, -1.39302996514e-17f},
                            {0.178956755709f, 0.047692179587f, -1.05897911744e-17f},
                            {0.174015825455f, 0.0449231890327f, -9.97495176075e-18f},
                            {0.178956755709f, 0.047692179587f, -1.05897911744e-17f},
                            {0.17961598949f, 0.0627364923193f, -1.39302996514e-17f},
                            {0.180829039558f, 0.0870686632708f, -1.93331269373e-17f},
                            {0.208825383486f, 0.0843740214678f, -1.87347962627e-17f},
                            {0.218107932294f, 0.0982978446801f, -2.1826506087e-17f},
                            {0.211146020688f, 0.116862942297f, -2.59487858526e-17f},
                            {0.192580923071f, 0.15399313753f, -3.41933453839e-17f},
                            {0.180977737061f, 0.179520146752f, -3.98614800617e-17f},
                            {0.165106360454f, 0.186871668484f, 4.34573234353e-05f},
                            {0.164733276647f, 0.179520146752f, -3.98614800617e-17f},
                            {0.141526904626f, 0.179520146752f, -3.98614800617e-17f},
                            {0.155450727838f, 0.158634411934f, -3.52239153253e-17f},
                            {0.145103861526f, 0.127382429254f, -0.000112039526645f},
                            {0.137619233946f, 0.113470789223f, -0.000111703918134f},
                            {0.129923718616f, 0.102939119084f, -2.28570760284e-17f},
                            {0.118320532605f, 0.0750914726595f, -1.66736563799e-17f},
                            {0.0695871513621f, 0.0472438262348f, -1.04902367315e-17f},
                            {0.106717346595f, 0.0727708354575f, -1.61583714092e-17f},
                            {0.0927935233827f, 0.0890152958719f, -1.97653662042e-17f},
                            {0.0649458769579f, 0.107580393488f, -2.38876459698e-17f},
                            {0.0185331329167f, 0.130786765509f, -2.90404956769e-17f},
                            {0.0231744073208f, 0.163275686338f, -3.62544852667e-17f},
                            {0.0626252397559f, 0.149351863125f, -3.31627754425e-17f},
                            {0.104396709393f, 0.121504216701f, -2.6979355794e-17f},
                            {0.13456499302f, 0.114542305095f, -2.54335008819e-17f},
                            {0.141526904626f, 0.128466128307f, -2.85252107062e-17f},
                            {0.148488816232f, 0.160955049136f, -3.5739200296e-17f},
                            {0.132244355818f, 0.174878872348f, -3.88309101203e-17f},
                            {0.139206267424f, 0.174878872348f, -3.88309101203e-17f},
                            {0.148488816232f, 0.186482058358f, -4.14073349738e-17f},
                            {0.13456499302f, 0.191123332763f, -4.24379049152e-17f},
                            {0.122961807009f, 0.17719950955f, -3.9346195091e-17f},
                            {0.102076072191f, 0.160955049136f, -3.5739200296e-17f},
                            {0.0974347977868f, 0.181840783954f, -4.03767650324e-17f},
                            {0.115999895403f, 0.209688430379f, -4.65601846809e-17f},
                            {0.148488816232f, 0.209688430379f, -4.65601846809e-17f},
                            {0.164733276647f, 0.186482058358f, -4.14073349738e-17f},
                            {0.180977737061f, 0.193443969965f, -4.29531898859e-17f},
                            {0.190260285869f, 0.205047155975f, -4.55296147394e-17f},
                            {0.178657099859f, 0.221291616389f, -4.91366095344e-17f},
                            {0.174015825455f, 0.25610117442f, -5.6865884095e-17f},
                            {0.164733276647f, 0.281628183643f, -6.25340187727e-17f},
                            {0.160092002242f, 0.297872644057f, -6.61410135677e-17f},
                            {0.150809453434f, 0.304834555663f, -6.76868684798e-17f},
                            {0.136885630222f, 0.32339965328f, -7.18091482454e-17f},
                            {0.0925084409024f, 0.331410254566f, -7.35878590432e-17f},
                            {0.050470011529f, 0.332161470019f, -7.37546623816e-17f},
                            {0.030136318927f, 0.316437741674f, -7.02632933333e-17f},
                            {0.0411571190241f, 0.34360922963f, -7.62965756417e-17f},
                            {0.006923210809f, 0.334315611479f, -7.42329778711e-17f},
                            {0.0183597447645f, 0.300348344255f, -6.669072944e-17f},
                            {0.0313471232052f, 0.290013246094f, -6.4395876652e-17f},
                            {0.0804800919934f, 0.275124467673f, -6.10899037297e-17f},
                            {0.123657549413f, 0.273635589831f, -6.07593064375e-17f},
                            {0.140035205676f, 0.245346910832f, -5.44779578853e-17f},
                            {0.138546327834f, 0.230458132411f, -5.1171984963e-17f},
                            {0.113235404519f, 0.223013743201f, -4.95189985019e-17f},
                            {0.0968577482562f, 0.205147209096f, -4.55518309952e-17f},
                            {0.0849467255197f, 0.178347407939f, -3.96010797352e-17f},
                            {0.0730357027831f, 0.175369652255f, -3.89398851507e-17f},
                            {0.0536802908362f, 0.185791797149f, -4.12540661963e-17f},
                            {0.0313471232052f, 0.188769552833f, -4.19152607808e-17f},
                            {0.0209249783107f, 0.196213942044f, -4.35682472419e-17f}};

static float gun[][3] = {{0.891741107889f, -0.830181070856f, 0.0f},
                        {0.891741107889f, -0.830181070856f, 0.0f},
                        {0.944506853918f, -0.854805085669f, 0.0f},
                        {1.01486118196f, -0.861840518473f, 0.0f},
                        {1.0957686592f, -0.861840518473f, 0.0f},
                        {1.18019385285f, -0.865358234875f, 0.0f},
                        {1.26461904649f, -0.865358234875f, 0.0f},
                        {1.32090250892f, -0.851287369267f, 0.0f},
                        {1.33145565813f, -0.83721650366f, 0.0f},
                        {1.34200880734f, -0.823145638052f, 0.0f},
                        {1.32442022533f, -0.787968474032f, 0.0f},
                        {1.2822076285f, -0.707060996788f, 0.0f},
                        {1.24351274808f, -0.60152950473f, 0.0f},
                        {1.20833558406f, -0.481927147065f, 0.0f},
                        {1.17315842004f, -0.404537386222f, 0.0f},
                        {1.12391039042f, -0.30955904337f, 0.0f},
                        {1.06762692799f, -0.235686998929f, 0.0f},
                        {0.993754883545f, -0.158297238087f, 0.0f},
                        {0.909329689899f, -0.119602357666f, 0.0f},
                        {0.810833630645f, -0.102013775656f, 0.0f},
                        {0.793245048635f, -0.0598011788328f, 0.0f},
                        {0.754550168214f, -0.0211062984116f, 0.0f},
                        {0.751032451812f, -0.0211062984116f, 0.0f},
                        {0.761585601018f, 0.00351771640193f, 0.0f},
                        {0.761585601018f, 0.0738720444405f, 0.0f},
                        {0.740479302606f, 0.105531492058f, 0.0f},
                        {0.772138750224f, 0.137190939675f, 0.0f},
                        {0.789727332233f, 0.168850387293f, 0.0f},
                        {0.796762765037f, 0.211062984116f, 0.0f},
                        {0.796762765037f, 0.235686998929f, 0.0f},
                        {0.814351347047f, 0.274381879351f, 0.0f},
                        {0.824904496253f, 0.29197046136f, 0.0f},
                        {0.789727332233f, 0.284935028556f, 0.0f},
                        {0.772138750224f, 0.263828730145f, 0.0f},
                        {0.751032451812f, 0.21809841692f, 0.0f},
                        {0.736961586204f, 0.186438969302f, 0.0f},
                        {0.701784422185f, 0.179403536498f, 0.0f},
                        {0.659571825362f, 0.20050983491f, 0.0f},
                        {0.620876944941f, 0.214580700518f, 0.0f},
                        {0.561075766108f, 0.232169282527f, 0.0f},
                        {0.518863169285f, 0.225133849724f, 0.0f},
                        {0.557558049706f, 0.207545267714f, 0.0f},
                        {0.599770646529f, 0.193474402106f, 0.0f},
                        {0.641983243352f, 0.1829212529f, 0.0f},
                        {0.694748989381f, 0.12663779047f, 0.0f},
                        {0.719373004195f, 0.052765746029f, 0.0f},
                        {0.712337571391f, -0.0246240148135f, 0.0f},
                        {0.663089541764f, -0.0914606264502f, 0.0f},
                        {0.603288362931f, -0.10904920846f, 0.0f},
                        {0.568111198912f, -0.119602357666f, 0.0f},
                        {0.571628915314f, -0.0211062984116f, 0.0f},
                        {0.571628915314f, 0.0351771640193f, 0.0f},
                        {0.575146631716f, 0.12663779047f, 0.0f},
                        {0.575146631716f, 0.158297238087f, 0.0f},
                        {0.539969467696f, 0.189956685704f, 0.0f},
                        {0.554040333304f, 0.140708656077f, 0.0f},
                        {0.508310020079f, 0.151261805283f, 0.0f},
                        {0.504792303677f, 0.0809074772444f, 0.0f},
                        {0.550522616902f, 0.0703543280386f, 0.0f},
                        {0.550522616902f, -0.00703543280386f, 0.0f},
                        {0.508310020079f, -0.0281417312154f, 0.0f},
                        {0.504792303677f, -0.0809074772444f, 0.0f},
                        {0.543487184098f, -0.0703543280386f, 0.0f},
                        {0.554040333304f, -0.0703543280386f, 0.0f},
                        {0.550522616902f, -0.0984960592541f, 0.0f},
                        {0.532934034893f, -0.119602357666f, 0.0f},
                        {0.511827736481f, -0.123120074068f, 0.0f},
                        {0.195233260307f, -0.116084641264f, 0.0f},
                        {0.195233260307f, -0.00703543280386f, 0.0f},
                        {0.202268693111f, 0.116084641264f, 0.0f},
                        {0.209304125915f, 0.207545267714f, 0.0f},
                        {0.525898602089f, 0.214580700518f, 0.0f},
                        {0.205786409513f, 0.207545267714f, 0.0f},
                        {0.191715543905f, 0.123120074068f, 0.0f},
                        {0.156538379886f, 0.0949783428521f, 0.0f},
                        {0.135432081474f, 0.0949783428521f, 0.0f},
                        {0.205786409513f, 0.0949783428521f, 0.0f},
                        {0.205786409513f, 0.0105531492058f, 0.0f},
                        {0.135432081474f, 0.00703543280386f, 0.0f},
                        {0.142467514278f, -0.116084641264f, 0.0f},
                        {0.205786409513f, -0.119602357666f, 0.0f},
                        {0.142467514278f, -0.116084641264f, 0.0f},
                        {0.142467514278f, -0.172368103695f, 0.0f},
                        {0.0967372010531f, -0.151261805283f, 0.0f},
                        {0.0685954698376f, -0.123120074068f, 0.0f},
                        {0.0580423206319f, -0.0949783428521f, 0.0f},
                        {0.0369360222203f, -0.049248029627f, 0.0f},
                        {0.00879429100483f, -0.0140708656077f, 0.0f},
                        {-0.0615600370338f, -0.0175885820097f, 0.0f},
                        {-0.156538379886f, -0.0175885820097f, 0.0f},
                        {-0.212821842317f, -0.00351771640193f, 0.0f},
                        {-0.244481289934f, 0.0281417312154f, 0.0f},
                        {-0.265587588346f, 0.0879429100483f, 0.0f},
                        {-0.269105304748f, 0.105531492058f, 0.0f},
                        {-0.300764752365f, 0.0844251936463f, 0.0f},
                        {-1.18722928565f, 0.0984960592541f, 0.0f},
                        {-1.22240644967f, 0.0316594476174f, 0.0f},
                        {-1.25758361369f, 0.102013775656f, 0.0f},
                        {-1.31386707612f, 0.0984960592541f, 0.0f},
                        {-1.32442022533f, 0.133673223273f, 0.0f},
                        {-0.262069871944f, 0.130155506871f, 0.0f},
                        {-1.32442022533f, 0.140708656077f, 0.0f},
                        {-1.32793794173f, 0.189956685704f, 0.0f},
                        {0.131914365072f, 0.204027551312f, 0.0f},
                        {0.138949797876f, 0.0984960592541f, 0.0f},
                        {0.167091529092f, 0.105531492058f, 0.0f},
                        {0.191715543905f, 0.10904920846f, 0.0f},
                        {0.202268693111f, 0.137190939675f, 0.0f},
                        {0.202268693111f, 0.186438969302f, 0.0f},
                        {0.184680111101f, 0.225133849724f, 0.0f},
                        {0.149502947082f, 0.235686998929f, 0.0f},
                        {0.12839664867f, 0.239204715331f, 0.0f},
                        {-1.24351274808f, 0.235686998929f, 0.0f},
                        {-1.25758361369f, 0.263828730145f, 0.0f},
                        {-1.2681367629f, 0.242722431733f, 0.0f},
                        {-1.2786899121f, 0.235686998929f, 0.0f},
                        {-1.32090250892f, 0.232169282527f, 0.0f},
                        {-1.33497337453f, 0.196992118508f, 0.0f},
                        {-1.32442022533f, 0.137190939675f, 0.0f},
                        {-1.31034935972f, 0.0949783428521f, 0.0f},
                        {-1.26461904649f, 0.0949783428521f, 0.0f},
                        {-1.22592416607f, 0.0316594476174f, 0.0f},
                        {-1.21185330047f, 0.0457303132251f, 0.0f},
                        {-0.441473408442f, 0.0140708656077f, 0.0f},
                        {-0.434437975638f, 0.0246240148135f, 0.0f},
                        {-0.385189946011f, 0.0175885820097f, 0.0f},
                        {-0.34649506559f, -0.0105531492058f, 0.0f},
                        {-0.321871050777f, -0.049248029627f, 0.0f},
                        {-0.321871050777f, -0.0844251936463f, 0.0f},
                        {-0.300764752365f, -0.119602357666f, 0.0f},
                        {-0.25503443914f, -0.119602357666f, 0.0f},
                        {-0.219857275121f, -0.0809074772444f, 0.0f},
                        {-0.209304125915f, -0.0386948804212f, 0.0f},
                        {-0.205786409513f, -0.0211062984116f, 0.0f},
                        {-0.177644678298f, -0.0281417312154f, 0.0f},
                        {-0.177644678298f, -0.0879429100483f, 0.0f},
                        {0.051006887828f, -0.0914606264502f, 0.0f},
                        {0.0791486190434f, -0.119602357666f, 0.0f},
                        {0.0932194846512f, -0.154779521685f, 0.0f},
                        {0.135432081474f, -0.172368103695f, 0.0f},
                        {0.209304125915f, -0.189956685704f, 0.0f},
                        {0.219857275121f, -0.20050983491f, 0.0f},
                        {0.367601364002f, -0.232169282527f, 0.0f},
                        {0.381672229609f, -0.249757864537f, 0.0f},
                        {0.388707662413f, -0.270864162949f, 0.0f},
                        {0.388707662413f, -0.288452744958f, 0.0f},
                        {0.388707662413f, -0.330665341781f, 0.0f},
                        {0.388707662413f, -0.358807072997f, 0.0f},
                        {0.402778528021f, -0.41860825183f, 0.0f},
                        {0.43795569204f, -0.467856281457f, 0.0f},
                        {0.504792303677f, -0.488962579868f, 0.0f},
                        {0.575146631716f, -0.499515729074f, 0.0f},
                        {0.641983243352f, -0.481927147065f, 0.0f},
                        {0.670124974568f, -0.446749983045f, 0.0f},
                        {0.677160407372f, -0.415090535428f, 0.0f},
                        {0.694748989381f, -0.372877938605f, 0.0f},
                        {0.754550168214f, -0.351771640193f, 0.0f},
                        {0.743997019008f, -0.288452744958f, 0.0f},
                        {0.74751473541f, -0.334183058183f, 0.0f},
                        {0.722890720597f, -0.341218490987f, 0.0f},
                        {0.670124974568f, -0.334183058183f, 0.0f},
                        {0.663089541764f, -0.334183058183f, 0.0f},
                        {0.663089541764f, -0.355289356595f, 0.0f},
                        {0.645500959754f, -0.415090535428f, 0.0f},
                        {0.631430094147f, -0.439714550241f, 0.0f},
                        {0.592735213725f, -0.464338565055f, 0.0f},
                        {0.5470049005f, -0.464338565055f, 0.0f},
                        {0.476650572462f, -0.453785415849f, 0.0f},
                        {0.449506617866f, -0.432679117437f, 0.0f},
                        {0.422593146801f, -0.40101966982f, 0.0f},
                        {0.419075430399f, -0.362324789399f, 0.0f},
                        {0.420367110031f, -0.302523610566f, 0.0f},
                        {0.448508841246f, -0.263828730145f, 0.0f},
                        {0.466097423256f, -0.253275580939f, 0.0f},
                        {0.532934034893f, -0.270864162949f, 0.0f},
                        {0.606806079333f, -0.288452744958f, 0.0f},
                        {0.610323795735f, -0.32714762538f, 0.0f},
                        {0.606806079333f, -0.379913371409f, 0.0f},
                        {0.585699780921f, -0.422125968232f, 0.0f},
                        {0.568111198912f, -0.453785415849f, 0.0f},
                        {0.589217497323f, -0.453785415849f, 0.0f},
                        {0.610323795735f, -0.425643684634f, 0.0f},
                        {0.631430094147f, -0.390466520614f, 0.0f},
                        {0.641983243352f, -0.341218490987f, 0.0f},
                        {0.63846552695f, -0.313076759772f, 0.0f},
                        {0.663089541764f, -0.337700774585f, 0.0f},
                        {0.743997019008f, -0.334183058183f, 0.0f},
                        {0.74751473541f, -0.284935028556f, 0.0f},
                        {0.195233260307f, -0.179403536498f, 0.0f},
                        {0.156538379886f, -0.168850387293f, 0.0f},
                        {0.156538379886f, -0.144226372479f, 0.0f},
                        {0.156538379886f, -0.130155506871f, 0.0f},
                        {0.511827736481f, -0.137190939675f, 0.0f},
                        {0.663089541764f, -0.0984960592541f, 0.0f},
                        {0.708819854989f, -0.0598011788328f, 0.0f},
                        {0.712337571391f, -0.0422125968232f, 0.0f},
                        {0.751032451812f, -0.0422125968232f, 0.0f},
                        {0.751032451812f, -0.161814954489f, 0.0f},
                        {0.969130868732f, -0.168850387293f, 0.0f},
                        {0.754550168214f, -0.186438969302f, 0.0f},
                        {0.754550168214f, -0.355289356595f, 0.0f},
                        {0.817869063449f, -0.365842505801f, 0.0f},
                        {0.870634809478f, -0.41860825183f, 0.0f},
                        {0.909329689899f, -0.481927147065f, 0.0f},
                        {0.933953704713f, -0.555799191505f, 0.0f},
                        {0.937471421115f, -0.643742101553f, 0.0f},
                        {0.933953704713f, -0.721131862396f, 0.0f},
                        {0.916365122703f, -0.784450757631f, 0.0f},
                        {0.905811973497f, -0.830181070856f, 0.0f},
                        {0.905811973497f, -0.830181070856f, 0.0f}};
static int gunCount = sizeof(gun)/sizeof(gun[0]);
static int lincolnCount = sizeof(lincoln)/sizeof(lincoln[0]);

void orient_0( float x, float y, float z ) { glVertex3f( x, y, z ); }
void orient_1( float x, float y, float z ) { glVertex3f( -x, z, y ); }
void orient_2( float x, float y, float z ) { glVertex3f( x, -y, z ); }
void orient_3( float x, float y, float z ) { glVertex3f( -x, -y, -z ); }
void orient_4( float x, float y, float z ) { glVertex3f( y, x, z  ); }
void orient_5( float x, float y, float z ) { glVertex3f( -y, x, z ); }
void orient_6( float x, float y, float z ) { glVertex3f( y, -x, z ); }
void orient_7( float x, float y, float z ) { glVertex3f( -y, -x, -z); }
void orient_8( float x, float y, float z ) { glVertex3f(  z, y, x ); }
void orient_9( float x, float y, float z ) { glVertex3f( -z, x, y); }
void orient_10( float x, float y, float z ) { glVertex3f( z, -x, y ); }
void orient_11( float x, float y, float z ) { glVertex3f( z, x, -y ); }
void orient_12( float x, float y, float z ) { glVertex3f( z, -x, -y ); }

MTypeId LHLocator::id(0x00007667);


MObject LHLocator::aMessage;
MObject LHLocator::aDrawFaces;
MObject LHLocator::aType;
MObject LHLocator::aSize;
MObject LHLocator::aOrient;
MObject LHLocator::aColorR;
MObject LHLocator::aColorG;
MObject LHLocator::aColorB;


LHLocator::LHLocator()
{}


LHLocator::~LHLocator()
{}


void LHLocator::draw(M3dView &view, const MDagPath &path,
                                                        M3dView::DisplayStyle style,
                                                        M3dView::DisplayStatus status)
{
        MObject thisMObj = thisMObject();

        //get colors
        float r = MPlug( thisMObj, aColorR ).asFloat();
        float g = MPlug( thisMObj, aColorG ).asFloat();
        float b = MPlug( thisMObj, aColorB ).asFloat();
        //get locator specific attrs
        double tx = MPlug( thisMObj, localPositionX ).asDouble();
        double ty = MPlug( thisMObj, localPositionY ).asDouble();
        double tz = MPlug( thisMObj, localPositionZ ).asDouble();

        //get type
        int type = MPlug( thisMObj, aType ).asInt();
        //---get size
        MDistance dist = MPlug(thisMObj, aSize).asMDistance();
        float size = (float)dist.asCentimeters();
        //---get orient
        int orient = MPlug(thisMObj, aOrient).asInt();

        view.beginGL();

        if (status == M3dView::kLead)
        {
            glColor4f(0.26, 1.0, 0.604, .5);
        }
        //---last selected
        if (status == M3dView::kActive){
            glColor4f(1, 1, 1, .5);
        }
        //---not selected
        if (status == M3dView::kDormant){
            glColor4f(r, g, b, .5);
        }
        //---affected
        if (status == M3dView::kActiveAffected){
            glColor4f(2.0, 0.0, 2.0, .5);
        }

        if (status == M3dView::kTemplate){
            glColor4f(0.47, 0.47, 0.47, .5);
        }

        if (status == M3dView::kActiveTemplate){
            glColor4f(1.0, 0.47, 0.47, .5);
        }

        void (*point)( float, float, float );
        if (orient <= 0)
            point = orient_0;
        else if (orient == 1)
            point = orient_1;
        else if (orient == 2)
            point = orient_2;
        else if (orient == 3)
            point = orient_3;
        else if (orient == 4)
            point = orient_4;
        else if (orient == 5)
            point = orient_5;
        else if (orient == 6)
            point = orient_6;
        else if (orient == 7)
            point = orient_7;
        else if (orient == 8)
            point = orient_8;
        else if (orient == 9)
            point = orient_9;
        else if (orient == 10)
            point = orient_10;
        else if (orient == 11)
            point = orient_11;
        else if (orient >= 12)
            point = orient_12;

        //
        glBegin(GL_LINE_STRIP);
        if (type <= 0)
        {
            for (unsigned int i = 0; i < gunCount-1; ++i) {
                 point((gun[i][0] * size) + tx,
                       (gun[i][1] * size) + ty,
                       (gun[i][2] * size) + tz);
                }
        }
        if (type >= 1)
        {
            for (unsigned int i = 0; i < lincolnCount-1; ++i) {
                point((lincoln[i][0] * size) + tx,
                      (lincoln[i][1] * size) + ty,
                      (lincoln[i][2] * size) + tz);
                }
        }
        glEnd();

        view.endGL();
}


void* LHLocator::creator()
{
        return new LHLocator();
}


MStatus LHLocator::initialize()
{
    MFnNumericAttribute nAttr;
    MFnUnitAttribute uAttr;
    MFnMessageAttribute meAttr;

    aMessage = meAttr.create( "faceSet", "fs");
    addAttribute(aMessage);

    aDrawFaces = nAttr.create( "drawFaces", "df", MFnNumericData::kInt);
    nAttr.setKeyable(true);
    nAttr.setWritable(true);
    addAttribute(aDrawFaces);


    aType = nAttr.create( "Type", "t", MFnNumericData::kInt);
    nAttr.setKeyable(true);
    nAttr.setWritable(true);
    addAttribute(aType);

    aSize = uAttr.create( "Size", "s", MFnUnitAttribute::kDistance);
    uAttr.setDefault(1.0);
    uAttr.setKeyable(true);
    uAttr.setWritable(true);
    addAttribute(aSize);

    aColorR = nAttr.create( "Color_R", "cr", MFnNumericData::kFloat);
    nAttr.setKeyable(true);
    nAttr.setWritable(true);
    addAttribute(aColorR);

    aColorG = nAttr.create( "Color_G", "cg", MFnNumericData::kFloat);
    nAttr.setKeyable(true);
    nAttr.setWritable(true);
    addAttribute(aColorG);

    aColorB = nAttr.create( "Color_B", "cb", MFnNumericData::kFloat);
    nAttr.setKeyable(true);
    nAttr.setWritable(true);
    addAttribute(aColorB);

    aOrient = nAttr.create( "Orient", "o", MFnNumericData::kInt);
    nAttr.setKeyable(true);
    nAttr.setWritable(true);
    addAttribute(aOrient);

        return MS::kSuccess;
}


